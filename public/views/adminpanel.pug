doctype html
head
  meta(charset='UTF-8')
  meta(http-equiv='X-UA-Compatible' content='IE=edge')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
  meta(name='keywords' content='arthur workshop, sombreado')
  link(rel='icon' href='imgs/icon.png')
  link(rel='stylesheet' href='https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200')
  link(rel='stylesheet' href='/style/adminpanel.css')
  link(rel='stylesheet' href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css')
  link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65' crossorigin='anonymous')
  title Arthur Workshop

  .products-container
    .new-product
      a.new-btn(href="/admin/panel/new") Añadir Producto
      a.back-btn(href="/") Ir a la Pagina Principal
  each prod in x
    .products
        .img-container 
          img.product-image(src= `../products-imgs/${prod.pImage}`)
        .price-container 
          h2.product-price= prod.pPrice
        .disc-container 
          h2.product-disc= prod.pDisc
        .desc-container 
          h4.product-desc= prod.pName
        .color-container
          h4.product-color= `Color ${prod.pColor}`  
        .size-container 
          h4.product-size= prod.pSize
        .id-container 
          h3.product-id= `ID: ${prod.pID}`
        .actions 
          a#edit.action-btn(href=`/admin/panel/${prod._id}/edit`) Editar
          a#delete.action-btn(href=`/admin/panel/${prod. _id}/delete`) Eliminar
  .orders
      h1.orders-h1 Pedidos
  .products-max-container
      each client in y
        if client.done == false
          .products
            .client-name-container
              h4.client-name.c-info= `Nombre del cliente: "${client.nameClient}"`
            .client-number-container
              h4.client-number.c-info= `Numero de teléfono del cliente: "${client.telNumber}"`
            .client-name-container
              h4.client-adress.c-info= `Direccion del cliente: "${client.adress}"`
            .client-products-container
              h4.client-products.c-info Productos comprados:
              if JSON.parse(client.products).length == 1 
                img.order-img(src=JSON.parse(client.products)[0].img, width=200, height=200)
                h3=`Id: ${JSON.parse(client.products)[0].id}`
                h3=`Producto: ${JSON.parse(client.products)[0].name}`
                h3=`Precio: ${JSON.parse(client.products)[0].price}`
                h3=`Descuento: ${JSON.parse(client.products)[0].disc}`
                h3=`Tamaño: ${JSON.parse(client.products)[0].size}`
                h3=`Cantidad: ${JSON.parse(client.products)[0].amount}`
                h3=`Color: ${JSON.parse(client.products)[0].color}`
              if JSON.parse(client.products).length > 1 
               each cli in JSON.parse(client.products)
                img.order-img(src=cli.img, width=200, height=200)
                h3=`Id: ${cli.id}`
                h3=`Producto: ${cli.name}` 
                h3=`Precio: ${cli.price}`
                h3=`Descuento: ${cli.disc}`
                h3=`Tamaño: ${cli.size}`
                h3=`Cantidad: ${cli.amount}`
                h3=`Color: ${cli.color}`
            a#edit.action-btn(href=`/admin/panel/${client._id}/done`) Pedido Entregado
        else
            
      
  .h1-orders
      h1.orders-h1 Pedidos Hechos
  .products-max-container
      each client in y
        if client.done == true
          .products
            .client-name-container
              h4.client-name.c-info= `Nombre del cliente: "${client.nameClient}"`
            .client-number-container
              h4.client-number.c-info= `Numero de teléfono del cliente: "${client.telNumber}"`
            .client-name-container
              h4.client-adress.c-info= `Direccion del cliente: "${client.adress}"`
            .client-products-container
              h4.client-products.c-info Productos comprados:
              if JSON.parse(client.products).length == 1 
                img.order-img(src=JSON.parse(client.products)[0].img, width=200, height=200)
                h3=`Id: ${JSON.parse(client.products)[0].id}`
                h3=`Producto: ${JSON.parse(client.products)[0].name}`
                h3=`Precio: ${JSON.parse(client.products)[0].price}`
                h3=`Descuento: ${JSON.parse(client.products)[0].disc}`
                h3=`Tamaño: ${JSON.parse(client.products)[0].size}`
                h3=`Cantidad: ${JSON.parse(client.products)[0].amount}`
                h3=`Color: ${JSON.parse(client.products)[0].color}`
              if JSON.parse(client.products).length > 1 
               each cli in JSON.parse(client.products)
                img.order-img(src=cli.img, width=200, height=200)
                h3=`Id: ${cli.id}`
                h3=`Producto: ${cli.name}` 
                h3=`Precio: ${cli.price}`
                h3=`Descuento: ${cli.disc}`
                h3=`Tamaño: ${cli.size}`
                h3=`Cantidad: ${cli.amount}`
                h3=`Color: ${cli.color}`
              a#edit.action-btn(href=`/admin/panel/${client._id}/undoOrder`) Cancelar Entrega
              a#edit.action-btn(href=`/admin/panel/${client._id}/deleteOrder`) Borrar
        else 
      
